<!DOCTYPE html>
<html>
<head>
    <title>Todo List</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Мой Todo List</h1>

        <!-- Форма добавления -->
        <form method="POST" action="/add">
            <input type="text" name="task" placeholder="Новая задача" required>
            <button type="submit">Добавить</button>
        </form>

        <!-- Активные задачи -->
        <h2>Активные задачи:</h2>
        <ul class="task-list">
            {% for task in active_tasks %}
            <li class="task-list__item task-list__item--active">
                {% if edit_id == loop.index0 %}
                    <!-- Форма редактирования (показывается когда edit_id совпадает) -->
                    <form method="POST" action="/edit/{{ loop.index0 }}" class="edit-form">
                        <input type="text" name="edited_task" value="{{ task }}" class="edit-input" required>
                        <button type="submit">Сохранить</button>
                        <a href="/">Отмена</a>
                    </form>
                {% else %}
                    <!-- Обычный вид задачи -->
                    <span class="task-list__text">{{ task }}</span>
                    <div class="task-actions">
                        <a href="/?edit={{ loop.index0 }}" class="task-list__edit">✏️</a>
                        <a href="/complete/{{ loop.index0 }}" class="task-list__complete">✅</a>
                        <a href="/delete/{{ loop.index0 }}" class="task-list__delete">❌</a>
                    </div>
                {% endif %}
            </li>
            {% endfor %}
        </ul>

        <!-- Выполненные задачи -->
        <h2>Выполненные задачи:</h2>
        <ul class="task-list">
            {% for task in completed_tasks %}
            <li class="task-list__item task-list__item--completed">
                <span class="task-list__text">{{ task }}</span>
            </li>
            {% endfor %}
        </ul>

        <!-- Удаленные задачи -->
        <h2>Удаленные задачи:</h2>
        <ul class="task-list">
            {% for task in deleted_tasks %}
            <li class="task-list__item task-list__item--deleted">
                <span class="task-list__text">{{ task }}</span>
            </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>